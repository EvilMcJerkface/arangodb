<script id="replicationView.ejs" type="text/template">
  <div id="replicationContent" class="innerContent replicationContent">
    
    <div class="repl-state">
      <table class="pure-table half-split">
          <tbody>
            <tr>
              <td>
                <div><i class="fa fa-server"></i></div>
                <div id="info-state-id"><%=info.state%></div>
              </td>
             
              <% if (mode !== 0) { %>
              <td>
                <div id="state-status-id"><i class="fa fa-check-circle"></i></div>
                <div id="info-health-id"><%=info.msg%></div>
              </td>
              <% } %>
            </tr>
            <% if (mode === 0) { %>
              <tr>
                <td><div>This node is not replicating from any other node. Also there are no active clients found. </br>Please visit our <a href="https://docs.arangodb.com/">Documentation</a> to find out how to setup replication.</div></td>
              </tr>
            <% } %>
          </tbody>
      </table>
    </div>

    
    <% if (mode !== 0) { %>
      <div class="repl-info">
        <div class="categoryBar">
          <h4>Info</h4>
        </div>
        <table class="pure-table">
            <tbody>
              <tr>
                <td>Mode:</td>
                <td id="info-mode-id"><%=info.mode%></td>
              </tr>
              <tr>
                <td>Level:</td>
                <td id="info-level-id"><%=info.level%></td>
              </tr>
              <tr>
                <td>Role:</td>
                <% if (mode === 3) { %>
                  <td id="info-role-id"><%=info.role%></td>
                <% } else { %>
                  <% if (info.role === 'follower') { %>
                    <td id="info-role-id">Slave</td>
                  <% } else { %>
                    <td id="info-role-id">Master</td>
                  <% } %>
                <% } %>
              </tr>
            </tbody>
        </table>
      </div>
    <% } %>

    <% if (mode === 3) { %>
      <div class="repl-nodes">
        <div class="categoryBar">
          <h4>Nodes</h4>
        </div>
      </div>
      <table class="pure-table">
          <tbody>
            <tr>
              <td>Leader:</td>
              <td id="nodes-leader-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
            </tr>
            <tr>
              <td>Followers:</td>
              <td id="nodes-followers-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
            </tr>
          </tbody>
      </table>
    <% } %>

    <% if (info.role === 'leader') { %>
      <div class="repl-logger">
        <div class="categoryBar">
          <% if (mode === 3) { %>
            <h4>Leader State</h4>
          <% } else { %>
            <h4>Master State</h4>
          <% } %>
        </div>
        <table class="pure-table">
            <tbody>
              <tr>
                <td>Running:</td>
                <td id="logger-running-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
              </tr>
              <tr>
                <td>Version:</td>
                <td id="logger-version-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
              </tr>
              <tr>
                <td>Server ID:</td>
                <td id="logger-serverid-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
              </tr>
              <tr>
                <td>Time:</td>
                <td id="logger-time-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
              </tr>
              <tr>
                <td>Last tick:</td>
                <td id="logger-lastLogTick-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
              </tr>
              <tr>
                <td>Last uncommited tick:</td>
                <td id="logger-lastUncommitedLogTick-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
              </tr>
              <tr>
                <td>Total events:</td>
                <td id="logger-totalEvents-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>
              </tr>
            </tbody>
        </table>
      </div>

      <div class="repl-logger-clients">
        <div class="categoryBar">
          <% if (mode === 3) { %>
            <h4>Follower States</h4>
          <% } else { %>
            <h4>Slave States</h4>
          <% } %>
        </div>
        <table class="pure-table" id="repl-logger-clients">
            <thead>
              <tr>
                <th>Server ID</th>
                <th>Time</th>
                <th>Last served tick</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
      </div>
    <% } %>

    <% if (info.role === 'follower') { %>
      <div class="repl-applier">
        <div class="categoryBar">
          <% if (mode === 3) { %>
            <h4>Follower States</h4>
          <% } else { %>
            <h4>Slave States</h4>
          <% } %>
        </div>

        <table id="repl-follower-table" class="pure-table" style="width: 100%">
          <thead>
            <tr>
              <th>Database</th>
              <th>Running</th>
              <th>Phase</th>
              <th>Replicating from</th>
              <th>Version</th>
              <th>State</th>
            </tr>
          </thead>

          <tbody>
          </tbody>

        </table>
      </div>
    <% } %>

  </div>
</script>
